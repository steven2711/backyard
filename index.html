<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Backyard Life - 16-Bit Adventure</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            box-sizing: border-box;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            margin: 0;
            padding: 10px;
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Press Start 2P', monospace;
            color: white;
            overflow: hidden;
        }
        
        #gameContainer {
            text-align: center;
            background: linear-gradient(145deg, #34495e 0%, #2c3e50 100%);
            padding: 15px;
            border: 3px solid #f39c12;
            border-radius: 8px;
            box-shadow: 
                0 0 20px rgba(243, 156, 18, 0.3),
                inset 0 0 20px rgba(0, 0, 0, 0.2);
            max-width: 100vw;
            max-height: 100vh;
        }
        
        #gameCanvas {
            border: 2px solid #f39c12;
            background: #27ae60;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            max-width: 100%;
            max-height: 70vh;
            display: block;
            margin: 0 auto;
        }
        
        #ui {
            margin-top: 10px;
            font-size: 10px;
            text-shadow: 2px 2px 0px #000;
        }
        
        #controls {
            margin-top: 8px;
            font-size: 6px;
            color: #f39c12;
            text-shadow: 1px 1px 0px #000;
        }
        
        .activity-message {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            color: #f1c40f;
            padding: 8px 12px;
            border: 2px solid #f39c12;
            border-radius: 4px;
            font-size: 8px;
            z-index: 1000;
            display: none;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        #touchControls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            z-index: 1001;
        }
        
        .touch-button {
            background: linear-gradient(145deg, #3498db 0%, #2980b9 100%);
            border: 2px solid #f39c12;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin: 5px;
            display: inline-block;
            text-align: center;
            line-height: 46px;
            font-family: 'Press Start 2P', monospace;
            font-size: 12px;
            color: white;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.3),
                inset 0 0 10px rgba(255, 255, 255, 0.1);
            cursor: pointer;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .touch-button:active {
            transform: scale(0.95);
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.3),
                inset 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .action-button {
            background: linear-gradient(145deg, #e74c3c 0%, #c0392b 100%);
            width: 60px;
            height: 60px;
            line-height: 56px;
            font-size: 10px;
        }
        
        #dpad {
            display: inline-block;
            position: relative;
            width: 150px;
            height: 150px;
            margin-right: 40px;
        }
        
        #dpad .touch-button {
            position: absolute;
        }
        
        #dpad .up { top: 0; left: 50%; transform: translateX(-50%); }
        #dpad .down { bottom: 0; left: 50%; transform: translateX(-50%); }
        #dpad .left { left: 0; top: 50%; transform: translateY(-50%); }
        #dpad .right { right: 0; top: 50%; transform: translateY(-50%); }
        
        @media (max-width: 768px) {
            body { padding: 5px; }
            #gameContainer { padding: 10px; }
            #touchControls { display: block; }
            #controls { display: none; }
            .touch-button { width: 45px; height: 45px; line-height: 41px; }
            .action-button { width: 55px; height: 55px; line-height: 51px; }
        }
        
        @media (max-width: 480px) {
            body { padding: 2px; }
            #gameContainer { padding: 8px; border-width: 2px; }
            #ui { font-size: 8px; }
            #controls { font-size: 5px; }
            .touch-button { width: 40px; height: 40px; line-height: 36px; font-size: 10px; }
            .action-button { width: 50px; height: 50px; line-height: 46px; font-size: 8px; }
            #dpad { width: 120px; height: 120px; margin-right: 20px; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1 style="font-size: 14px; margin-bottom: 8px; text-shadow: 3px 3px 0px #000, 0 0 10px #f39c12;">BACKYARD LIFE</h1>
        <div style="position: relative;">
            <canvas id="gameCanvas" width="640" height="480"></canvas>
            <div id="activityMessage" class="activity-message"></div>
        </div>
        <div id="ui">
            <div>Days in Backyard: <span id="dayCounter">0</span></div>
        </div>
        <div id="controls">
            Use WASD or Arrow Keys to Move | Space to Interact
        </div>
    </div>
    
    <div id="touchControls">
        <div id="dpad">
            <div class="touch-button up" data-key="ArrowUp">↑</div>
            <div class="touch-button down" data-key="ArrowDown">↓</div>
            <div class="touch-button left" data-key="ArrowLeft">←</div>
            <div class="touch-button right" data-key="ArrowRight">→</div>
        </div>
        <div class="touch-button action-button" data-key="Space">ACT</div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const dayCounter = document.getElementById('dayCounter');
        const activityMessage = document.getElementById('activityMessage');
        
        // Game state
        let days = 0;
        let gameTime = 0;
        let lastTime = 0;
        
        // Player object
        const player = {
            x: 320,
            y: 240,
            width: 16,
            height: 16,
            speed: 2,
            color: '#e74c3c',
            animFrame: 0,
            animTimer: 0,
            direction: 'down',
            isMoving: false,
            idleTimer: 0,
            walkCycle: 0,
            shadowScale: 1.0
        };
        
        // Input handling
        const keys = {};
        
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });
        
        // Touch controls
        document.querySelectorAll('.touch-button').forEach(button => {
            button.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const key = button.getAttribute('data-key');
                keys[key] = true;
            });
            
            button.addEventListener('touchend', (e) => {
                e.preventDefault();
                const key = button.getAttribute('data-key');
                keys[key] = false;
            });
            
            button.addEventListener('mousedown', (e) => {
                e.preventDefault();
                const key = button.getAttribute('data-key');
                keys[key] = true;
            });
            
            button.addEventListener('mouseup', (e) => {
                e.preventDefault();
                const key = button.getAttribute('data-key');
                keys[key] = false;
            });
        });
        
        // Prevent scrolling on touch
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });
        
        // Handle canvas resize for mobile
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            const containerWidth = container.clientWidth - 40;
            const containerHeight = window.innerHeight * 0.6;
            
            const aspectRatio = 640 / 480;
            let newWidth = containerWidth;
            let newHeight = newWidth / aspectRatio;
            
            if (newHeight > containerHeight) {
                newHeight = containerHeight;
                newWidth = newHeight * aspectRatio;
            }
            
            canvas.style.width = newWidth + 'px';
            canvas.style.height = newHeight + 'px';
        }
        
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('orientationchange', () => {
            setTimeout(resizeCanvas, 100);
        });
        
        resizeCanvas();
        
        // Interactive objects in the backyard
        const objects = [
            {
                x: 100, y: 100, width: 32, height: 32,
                color: '#8b4513', type: 'workbench',
                activity: 'Building a chair! +1 furniture point'
            },
            {
                x: 500, y: 150, width: 24, height: 24,
                color: '#ff6b35', type: 'fire',
                activity: 'Sitting by the warm fire... relaxing!',
                animFrame: 0
            },
            {
                x: 50, y: 300, width: 20, height: 20,
                color: '#7f8c8d', type: 'trash',
                activity: 'Throwing trash over the fence! Naughty!'
            },
            {
                x: 400, y: 350, width: 28, height: 28,
                color: '#27ae60', type: 'garden',
                activity: 'Tending to the garden... peaceful!'
            },
            {
                x: 200, y: 400, width: 40, height: 16,
                color: '#34495e', type: 'fence',
                activity: 'Checking the fence... seems sturdy!'
            },
            {
                x: 550, y: 50, width: 16, height: 16,
                color: '#f39c12', type: 'shed',
                activity: 'Rummaging through the shed...'
            }
        ];
        
        // Draw pixel-perfect rectangle
        function drawPixelRect(x, y, width, height, color) {
            ctx.fillStyle = color;
            ctx.fillRect(Math.floor(x), Math.floor(y), width, height);
        }
        
        // Draw the player (enhanced 16-bit character with animations)
        function drawPlayer() {
            const x = Math.floor(player.x);
            const y = Math.floor(player.y);
            
            // Walking animation offsets
            const walkOffset = player.isMoving ? Math.sin(player.walkCycle * 0.3) * 1 : 0;
            const bobOffset = player.isMoving ? Math.sin(player.walkCycle * 0.6) * 0.5 : 0;
            
            // Dynamic shadow based on movement
            const shadowWidth = 12 + Math.sin(player.walkCycle * 0.3) * 2;
            drawPixelRect(x + 2, y + 14, shadowWidth, 2, `rgba(0,0,0,${0.3 + Math.sin(player.walkCycle * 0.2) * 0.1})`);
            
            // Add subtle glow effect when moving
            if (player.isMoving) {
                const glowSize = 2 + Math.sin(player.walkCycle * 0.4);
                drawPixelRect(x - glowSize, y - glowSize, 16 + glowSize * 2, 16 + glowSize * 2, 'rgba(52, 152, 219, 0.1)');
            }
            
            // Body with enhanced shading and animation
            const bodyY = y + 8 + bobOffset;
            drawPixelRect(x, bodyY, 16, 8, player.color);
            drawPixelRect(x + 1, bodyY, 14, 6, '#c0392b');
            drawPixelRect(x + 2, bodyY + 1, 12, 4, '#e74c3c');
            
            // Body highlights for 3D effect
            drawPixelRect(x + 1, bodyY, 2, 6, '#f85c5c');
            drawPixelRect(x + 2, bodyY + 1, 1, 4, '#ff7979');
            
            // Head with enhanced skin tone and animation
            const headY = y + bobOffset;
            drawPixelRect(x + 4, headY, 8, 8, '#fdbcb4');
            drawPixelRect(x + 5, headY + 1, 6, 6, '#f4a79e');
            drawPixelRect(x + 6, headY + 2, 4, 4, '#f7b69e');
            
            // Cheek blush
            drawPixelRect(x + 4, headY + 3, 1, 1, '#fab1a0');
            drawPixelRect(x + 11, headY + 3, 1, 1, '#fab1a0');
            
            // Enhanced hair/hat with more detail and shine
            drawPixelRect(x + 2, headY - 2, 12, 4, '#3498db');
            drawPixelRect(x + 3, headY - 1, 10, 2, '#5dade2');
            drawPixelRect(x + 1, headY - 1, 2, 1, '#2980b9');
            drawPixelRect(x + 13, headY - 1, 2, 1, '#2980b9');
            
            // Hat shine effect
            drawPixelRect(x + 4, headY - 2, 3, 1, '#74b9ff');
            drawPixelRect(x + 5, headY - 1, 2, 1, '#a8daff');
            
            // Animated eyes with blinking
            const eyeState = Math.floor(player.idleTimer / 60) % 180 < 5 ? 1 : 0; // Blink every 3 seconds
            if (eyeState === 0) {
                drawPixelRect(x + 5, headY + 2, 2, 2, '#000');
                drawPixelRect(x + 9, headY + 2, 2, 2, '#000');
                drawPixelRect(x + 5, headY + 2, 1, 1, '#fff');
                drawPixelRect(x + 9, headY + 2, 1, 1, '#fff');
                
                // Eye pupils that follow movement direction
                if (player.direction === 'left') {
                    drawPixelRect(x + 5, headY + 3, 1, 1, '#2c3e50');
                    drawPixelRect(x + 9, headY + 3, 1, 1, '#2c3e50');
                } else if (player.direction === 'right') {
                    drawPixelRect(x + 6, headY + 3, 1, 1, '#2c3e50');
                    drawPixelRect(x + 10, headY + 3, 1, 1, '#2c3e50');
                } else {
                    drawPixelRect(x + 5, headY + 3, 1, 1, '#2c3e50');
                    drawPixelRect(x + 9, headY + 3, 1, 1, '#2c3e50');
                }
            } else {
                // Closed eyes (blinking)
                drawPixelRect(x + 5, headY + 3, 2, 1, '#000');
                drawPixelRect(x + 9, headY + 3, 2, 1, '#000');
            }
            
            // Enhanced nose with shading
            drawPixelRect(x + 7, headY + 4, 2, 1, '#e8a085');
            drawPixelRect(x + 7, headY + 5, 1, 1, '#dda085');
            
            // Mouth with expressions
            if (player.isMoving) {
                drawPixelRect(x + 7, headY + 6, 2, 1, '#c0392b'); // Slightly open mouth when moving
            } else {
                drawPixelRect(x + 7, headY + 6, 2, 1, '#e8a085'); // Neutral mouth
            }
            
            // Enhanced shirt with more detail
            drawPixelRect(x + 6, bodyY + 2, 4, 2, '#fff');
            drawPixelRect(x + 7, bodyY + 3, 2, 1, '#ecf0f1');
            drawPixelRect(x + 6, bodyY + 2, 1, 1, '#f8f9fa'); // Shirt highlight
            
            // Shirt buttons
            drawPixelRect(x + 8, bodyY + 1, 1, 1, '#34495e');
            drawPixelRect(x + 8, bodyY + 4, 1, 1, '#34495e');
            
            // Animated arms with walking motion
            const leftArmOffset = player.isMoving ? Math.sin(player.walkCycle * 0.3) * 2 : 0;
            const rightArmOffset = player.isMoving ? Math.sin(player.walkCycle * 0.3 + Math.PI) * 2 : 0;
            
            // Left arm
            drawPixelRect(x - 2, bodyY + 1 + leftArmOffset, 4, 6, '#fdbcb4');
            drawPixelRect(x - 1, bodyY + 2 + leftArmOffset, 2, 4, '#f4a79e');
            drawPixelRect(x - 2, bodyY + 5 + leftArmOffset, 3, 3, '#fdbcb4');
            
            // Right arm
            drawPixelRect(x + 14, bodyY + 1 + rightArmOffset, 4, 6, '#fdbcb4');
            drawPixelRect(x + 15, bodyY + 2 + rightArmOffset, 2, 4, '#f4a79e');
            drawPixelRect(x + 15, bodyY + 5 + rightArmOffset, 3, 3, '#fdbcb4');
            
            // Enhanced legs with walking animation
            const leftLegOffset = player.isMoving ? Math.sin(player.walkCycle * 0.4) * 1.5 : 0;
            const rightLegOffset = player.isMoving ? Math.sin(player.walkCycle * 0.4 + Math.PI) * 1.5 : 0;
            
            // Pants
            drawPixelRect(x + 2, bodyY + 6, 5, 4, '#2c3e50');
            drawPixelRect(x + 9, bodyY + 6, 5, 4, '#2c3e50');
            drawPixelRect(x + 3, bodyY + 7, 3, 2, '#34495e');
            drawPixelRect(x + 10, bodyY + 7, 3, 2, '#34495e');
            
            // Shoes with animation
            drawPixelRect(x + 1 + leftLegOffset, y + 14, 6, 2, '#8b4513');
            drawPixelRect(x + 9 + rightLegOffset, y + 14, 6, 2, '#8b4513');
            drawPixelRect(x + 2 + leftLegOffset, y + 15, 4, 1, '#a0522d');
            drawPixelRect(x + 10 + rightLegOffset, y + 15, 4, 1, '#a0522d');
        }
        
        // Draw interactive objects with enhanced 16-bit details
        function drawObjects() {
            objects.forEach(obj => {
                const x = Math.floor(obj.x);
                const y = Math.floor(obj.y);
                
                switch(obj.type) {
                    case 'fire':
                        // Base fire
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 2, y + 2, obj.width - 4, obj.height - 4, '#ff4757');
                        
                        // Animated flames
                        const flameOffset = Math.sin(Date.now() * 0.01) * 2;
                        drawPixelRect(x + 4 + flameOffset, y - 8, 4, 8, '#f1c40f');
                        drawPixelRect(x + 8 + flameOffset, y - 12, 4, 12, '#e67e22');
                        drawPixelRect(x + 12 + flameOffset, y - 6, 4, 6, '#f39c12');
                        drawPixelRect(x + 16 + flameOffset, y - 4, 2, 4, '#ff6b35');
                        
                        // Sparks
                        drawPixelRect(x + 6 + Math.sin(Date.now() * 0.02) * 3, y - 14, 1, 1, '#ffd700');
                        drawPixelRect(x + 18 + Math.cos(Date.now() * 0.015) * 2, y - 10, 1, 1, '#ffd700');
                        break;
                        
                    case 'workbench':
                        // Workbench base with depth
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 2, y + 2, obj.width - 4, obj.height - 4, '#a0522d');
                        drawPixelRect(x + 4, y + 4, obj.width - 8, obj.height - 8, '#8b4513');
                        
                        // Tools with shadows
                        drawPixelRect(x + 6, y + 6, 4, 4, '#95a5a6');
                        drawPixelRect(x + 7, y + 7, 2, 2, '#bdc3c7');
                        drawPixelRect(x + 18, y + 8, 8, 4, '#f39c12');
                        drawPixelRect(x + 19, y + 9, 6, 2, '#ffd700');
                        
                        // Hammer
                        drawPixelRect(x + 12, y + 2, 2, 8, '#8b4513');
                        drawPixelRect(x + 10, y + 2, 6, 3, '#7f8c8d');
                        break;
                        
                    case 'garden':
                        // Garden bed
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 2, y + 2, obj.width - 4, obj.height - 4, '#229954');
                        
                        // Soil
                        drawPixelRect(x + 4, y + 20, obj.width - 8, 8, '#8b4513');
                        
                        // Enhanced plants with flowers
                        drawPixelRect(x + 4, y - 4, 4, 12, '#2ecc71');
                        drawPixelRect(x + 5, y - 3, 2, 10, '#27ae60');
                        drawPixelRect(x + 6, y - 6, 2, 2, '#e74c3c'); // Flower
                        
                        drawPixelRect(x + 12, y - 6, 4, 14, '#2ecc71');
                        drawPixelRect(x + 13, y - 5, 2, 12, '#27ae60');
                        drawPixelRect(x + 14, y - 8, 2, 2, '#f1c40f'); // Flower
                        
                        drawPixelRect(x + 20, y - 2, 4, 10, '#2ecc71');
                        drawPixelRect(x + 21, y - 1, 2, 8, '#27ae60');
                        drawPixelRect(x + 22, y - 4, 2, 2, '#9b59b6'); // Flower
                        break;
                        
                    case 'trash':
                        // Trash can with lid
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 2, y + 2, obj.width - 4, obj.height - 4, '#95a5a6');
                        drawPixelRect(x + 1, y - 2, obj.width - 2, 3, '#7f8c8d');
                        drawPixelRect(x + 8, y - 4, 4, 2, '#95a5a6'); // Handle
                        break;
                        
                    case 'fence':
                        // Fence with posts
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 2, y + 2, obj.width - 4, obj.height - 4, '#5d4e75');
                        
                        // Fence posts
                        for (let i = 0; i < obj.width; i += 8) {
                            drawPixelRect(x + i, y - 4, 2, obj.height + 8, '#8b4513');
                            drawPixelRect(x + i + 1, y - 3, 1, obj.height + 6, '#a0522d');
                        }
                        break;
                        
                    case 'shed':
                        // Shed base
                        drawPixelRect(x, y, obj.width, obj.height, obj.color);
                        drawPixelRect(x + 1, y + 1, obj.width - 2, obj.height - 2, '#ffd700');
                        
                        // Roof
                        drawPixelRect(x - 2, y - 4, obj.width + 4, 4, '#8b4513');
                        drawPixelRect(x - 1, y - 3, obj.width + 2, 2, '#a0522d');
                        
                        // Door
                        drawPixelRect(x + 6, y + 4, 4, 8, '#654321');
                        drawPixelRect(x + 8, y + 7, 1, 1, '#ffd700'); // Handle
                        break;
                }
            });
        }
        
        // Check collision with objects
        function checkCollisions() {
            if (keys['Space']) {
                objects.forEach(obj => {
                    if (player.x < obj.x + obj.width &&
                        player.x + player.width > obj.x &&
                        player.y < obj.y + obj.height &&
                        player.y + player.height > obj.y) {
                        
                        showActivity(obj.activity);
                    }
                });
            }
        }
        
        // Show activity message
        function showActivity(message) {
            activityMessage.textContent = message;
            activityMessage.style.display = 'block';
            setTimeout(() => {
                activityMessage.style.display = 'none';
            }, 2000);
        }
        
        // Update player position and animations
        function updatePlayer() {
            let newX = player.x;
            let newY = player.y;
            let moving = false;
            
            if (keys['KeyW'] || keys['ArrowUp']) {
                newY -= player.speed;
                player.direction = 'up';
                moving = true;
            }
            if (keys['KeyS'] || keys['ArrowDown']) {
                newY += player.speed;
                player.direction = 'down';
                moving = true;
            }
            if (keys['KeyA'] || keys['ArrowLeft']) {
                newX -= player.speed;
                player.direction = 'left';
                moving = true;
            }
            if (keys['KeyD'] || keys['ArrowRight']) {
                newX += player.speed;
                player.direction = 'right';
                moving = true;
            }
            
            // Update movement state and animations
            player.isMoving = moving;
            if (moving) {
                player.walkCycle += 1;
                player.idleTimer = 0;
            } else {
                player.idleTimer += 1;
                player.walkCycle = 0;
            }
            
            // Keep player within bounds (with border consideration)
            if (newX >= 12 && newX <= canvas.width - player.width - 12) {
                player.x = newX;
            }
            if (newY >= 12 && newY <= canvas.height - player.height - 12) {
                player.y = newY;
            }
        }
        
        // Update game time and day counter
        function updateTime(currentTime) {
            gameTime += currentTime - lastTime;
            lastTime = currentTime;
            
            // Increment day counter every 10 seconds
            if (gameTime > 10000) {
                days++;
                dayCounter.textContent = days;
                gameTime = 0;
            }
        }
        
        // Draw enhanced 16-bit background
        function drawBackground() {
            // Grass background with gradient
            ctx.fillStyle = '#27ae60';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grass base layer
            ctx.fillStyle = '#229954';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Lighter grass highlights
            ctx.fillStyle = '#2ecc71';
            for (let y = 0; y < canvas.height; y += 8) {
                for (let x = 0; x < canvas.width; x += 16) {
                    if ((x + y) % 32 === 0) {
                        ctx.fillRect(x, y, 8, 8);
                    }
                }
            }
            
            // Grass texture pattern
            ctx.fillStyle = '#1e8449';
            for (let i = 0; i < 100; i++) {
                const x = (i * 73 + 17) % canvas.width;
                const y = (i * 41 + 23) % canvas.height;
                ctx.fillRect(x, y, 2, 2);
                ctx.fillRect(x + 1, y + 2, 2, 2);
            }
            
            // Dirt patches
            ctx.fillStyle = '#8b4513';
            drawPixelRect(150, 200, 32, 16, '#8b4513');
            drawPixelRect(152, 202, 28, 12, '#a0522d');
            
            drawPixelRect(480, 300, 24, 20, '#8b4513');
            drawPixelRect(482, 302, 20, 16, '#a0522d');
            
            // Small flowers scattered around
            const flowerColors = ['#e74c3c', '#f1c40f', '#9b59b6', '#fff'];
            for (let i = 0; i < 15; i++) {
                const x = (i * 61 + 31) % (canvas.width - 20);
                const y = (i * 37 + 47) % (canvas.height - 20);
                const color = flowerColors[i % flowerColors.length];
                drawPixelRect(x, y, 2, 2, color);
                drawPixelRect(x + 1, y + 2, 2, 4, '#2ecc71');
            }
            
            // Decorative border fence with enhanced detail
            ctx.fillStyle = '#8b4513';
            
            // Top fence
            ctx.fillRect(0, 0, canvas.width, 8);
            ctx.fillStyle = '#a0522d';
            ctx.fillRect(2, 2, canvas.width - 4, 4);
            
            // Bottom fence
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(0, canvas.height - 8, canvas.width, 8);
            ctx.fillStyle = '#a0522d';
            ctx.fillRect(2, canvas.height - 6, canvas.width - 4, 4);
            
            // Left fence
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(0, 0, 8, canvas.height);
            ctx.fillStyle = '#a0522d';
            ctx.fillRect(2, 2, 4, canvas.height - 4);
            
            // Right fence
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(canvas.width - 8, 0, 8, canvas.height);
            ctx.fillStyle = '#a0522d';
            ctx.fillRect(canvas.width - 6, 2, 4, canvas.height - 4);
            
            // Fence posts
            ctx.fillStyle = '#654321';
            for (let x = 32; x < canvas.width - 32; x += 64) {
                ctx.fillRect(x, 0, 4, 12);
                ctx.fillRect(x, canvas.height - 12, 4, 12);
            }
            for (let y = 32; y < canvas.height - 32; y += 64) {
                ctx.fillRect(0, y, 12, 4);
                ctx.fillRect(canvas.width - 12, y, 12, 4);
            }
            
            // Corner decorations
            ctx.fillStyle = '#f39c12';
            drawPixelRect(8, 8, 8, 8, '#f39c12');
            drawPixelRect(canvas.width - 16, 8, 8, 8, '#f39c12');
            drawPixelRect(8, canvas.height - 16, 8, 8, '#f39c12');
            drawPixelRect(canvas.width - 16, canvas.height - 16, 8, 8, '#f39c12');
        }
        
        // Main game loop
        function gameLoop(currentTime) {
            if (!lastTime) lastTime = currentTime;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update
            updateTime(currentTime);
            updatePlayer();
            checkCollisions();
            
            // Draw
            drawBackground();
            drawObjects();
            drawPlayer();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Start the game
        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>